# План автоматизации тестирования

Тестирование сервиса по покупке тура с дебетовой карты.
 
## 1. Перечень автоматизируемых сценариев
### Позитивные сценарии
**Основная задача**: тестирование покупки тура с дебетовой карты. Данные передаются в БД (таблицы order_entity и payment_entity). В таблицу credit_request_entity не должны передаваться данные.

Зайти на сайт [сервиса по покупке тура](http://localhost:8080/) — Нажать на кнопку «Купить» — Открывается форма «Оплата по карте».

Опреация может быть одобрена и не одобрена банком. 

##### Операция одобрена банком
Заполнить форму «Оплата по карте».
| Наименование поля | Данные для заполнения                                                                                         |
|-------------------|---------------------------------------------------------------------------------------------------------------|
| Номер карты       | 1111 2222 3333 4444                                                                                           |
| Месяц             | Ввод значения в диапазоне 01-12, но если указан текущий год, то месяц должен быть больше или равен текущему   |
| Год               | Число из диапазона 22-27                                                                                      |
| Владелец          | Буквы на латинице от 1 до 40                                                                                  |
| CVC/CVV           | Любых 3 цифры                                                                                                 |

Нажать на кнопку «Продолжить».

**Ожидаемый результат**: данные записываются в БД, статус платежа — одобрено (APPROVED). Выводится сообщение: «Успешно! Опреация одобрена банком».

##### Операция не одобрена банком
Заполнить форму «Оплата по карте».
| Наименование поля | Данные для заполнения                                                                                         |
|-------------------|---------------------------------------------------------------------------------------------------------------|
| Номер карты       | 5555 6666 7777 8888                                                                                           |
| Месяц             | Ввод значения в диапазоне 01-12, но если ставим текущий год, то месяц должен быть больше или равен текущему   |
| Год               | Число из диапазона 22-27                                                                                      |
| Владелец          | Буквы на латинице от 1 до 40                                                                                  |
| CVC/CVV           | Любых 3 цифры                                                                                                 |

Нажать на кнопку «Продолжить».

**Ожидаемый результат**: данные записываются в БД, статус платежа — не одобрена (DECLINED). Выводится сообщение: «Ошибка! Опреация не одобрена банком».

### Негативные сценарии
**Основная задача:** проверить ввод невалидных данных в одно из полей, а в другие поля вводить валидные значения.

**Ожидаемый результат:** при вводе невалидных данных возникают сообщения о неверном заполнении поля. Данные не записываются в БД.

#### Отправка пустой формы
**Ожидаемый результат:** форма не отправляется, под незаполненными полями выводится сообщение: «Неверный формат» или «Поле обязательно для заполнения».

##### Невалидные значения для заполнения поля «Номер карты».
| Данные для заполнения | Ожидаемый результат                                        |
|-----------------------|------------------------------------------------------------|
| Пустое поле           | Под полем Номер карты выводится сообщение: Неверный формат |
| 5 цифр                | Под полем Номер карты выводится сообщение: Неверный формат |
| Русские буквы         | Поле остаётся пустым                                       |
| Символы               | Поле остаётся пустым                                       |
| Буквы на латинице     | Поле остаётся пустым                                       |
| 17 цифр               | В поле остаются первые 16 цифр                             |
| 16 цифр               | Выводится сообщение: Карта не подходит для оплаты          |

##### Невалидные значения для заполнения поля «Месяц».
| Данные для заполнения                                 | Ожидаемый результат                                                     |
|-------------------------------------------------------|-------------------------------------------------------------------------|
| Пустое поле                                           | Под полем Месяц выводится сообщение: Неверный формат                    |
| 1 цифра                                               | Под полем Месяц выводится сообщение: Неверный формат                    |
| 00                                                    | Под полем Месяц выводится сообщение: Неверно указан срок действия карты |
| 13                                                    | Под полем Месяц выводится сообщение: Неверно указан срок действия карты |
| Больше 2 цифр                                         | В поле остаются первые 2 цифр                                           |
| Русские буквы                                         | Поле остаётся пустым                                                    |
| Символы                                               | Поле остаётся пустым                                                    |
| Буквы на латинице                                     | Поле остаётся пустым                                                    |
| Если вводим текущий год, вводим месяц меньше текущего | Под полем Месяц выводится сообщение: Неверно указан срок действия карты |


##### Невалидные значения для заполнения поля «Год».
| Данные для заполнения               | Ожидаемый результат                                                     |
|-------------------------------------|-------------------------------------------------------------------------|
| Пустое поле                         | Под полем Год выводится сообщение: Неверный формат                      |
| 1 цифра                             | Под полем Месяц выводится сообщение: Неверный формат                    |
| Цифра меньше текущего года          | Под полем Месяц выводится сообщение: Истёк срок действия карты          |
| Цифра больше чем текущий год +5 лет | Под полем Месяц выводится сообщение: Неверно указан срок действия карты |
| Больше 2 цифр                       | В поле остаются первые 2 цифр                                           |
| Русские буквы                       | Поле остаётся пустым                                                    |
| Символы                             | Поле остаётся пустым                                                    |
| Буквы на латинице                   | Поле остаётся пустым                                                    |

##### Невалидные значения для заполнения поля «Владелец».
| Данные для заполнения | Ожидаемый результат                                                                          |
|-----------------------|----------------------------------------------------------------------------------------------|
| Пустое поле           | Под полем Владелец выводится сообщение: Поле обязательно для заполнения                      |
| 1 буква               | Под полем Владелец выводится сообщение: диапазон значения в поле должен быть от 2 до 40 букв |
| 41 буква              | Под полем Владелец выводится сообщение: диапазон значения в поле должен быть от 2 до 40 букв |
| Русские буквы         | Поле остаётся пустым                                                                         |
| Цифры                 | Поле остаётся пустым                                                                         |

##### Невалидные значения для заполнения поля «CVC/CVV».
| Данные для заполнения | Ожидаемый результат                                    |
|-----------------------|--------------------------------------------------------|
| Пустое поле           | Под полем CVC/CVV выводится сообщение: Неверный формат |
| 1 цифра               | Под полем CVC/CVV выводится сообщение: Неверный формат |
| Больше 3 цифр         | В поле остаются первые 3 цифр                          |
| Русские буквы         | Поле остаётся пустым                                   |
| Символы               | Поле остаётся пустым                                   |
| Буквы на латинице     | Поле остаётся пустым                                   |

## 2. Перечень используемых инструментов с обоснованием выбора
+ IntelliJ IDEA — интегрированная среда разработки программного обеспечения. Подходит для работы на Java. Умная среда разработки, есть автодополнения кода и очень гибкие настройки для работы. Поддерживает операционные системы Microsoft Windows, Linux, macOC.
+ Язык JAVA — объектно-ориентированный язык. Будем использоватть для написания авто-тестов. Поддерживает большое количество библиотек для написания кода автотестов.
+ Gradle — система автоматизации сборки. 
+ JUnit5 — фреймворк для модульного тестирования программного обеспечения на языке Java. Легко подключается в файле build.gradle в зависимостях.
+ Git — распределённая система контроля версий. GitHub — сервис онлайн-хостинга репозиториев, обладающий всеми функциями распределённого контроля версий и функциональностью управления исходным кодом . Удобно использовать для хранение кода и совместой работой с ним.
+ Selenide — это фреймворк для автоматизированного тестирования веб- приложений на основе Selenium WebDriver. Удобен тем, что легко добавляется в зависимости в файл + build.gradle. Не требует отдельной загрузки файла вебдрайвера для управления браузером.
+ Библиотека Facker. Легко подключается в build.gradle. Необходима для избежания эффекта пестицида при вводе валидных данных. Используем для ввода рандомных данных. Невалидные данные можно захардкордить.
+ Библиотека Lombok, позволит ускорить процесс написания стандартных методов и конструкторов, а также сократить и упростит в чтении код.
+ Docker Toolbox - система контейнерезации. Позволит подключить базы данных при необходимости.
+ Allure - фреймворк, позволит создать визуально наглядную картину выполнения тестов.
+ СУБД MySQL.

## 3. Перечень и описание возможных рисков при автоматизации
+ Сложности в настройки Docker. 
+ Сложности подключения к СУБД.
+ Неуникальные селекторы, которые затрудняют поиск элементов на страницах приложения.

## 4. Интервальная оценка с учётом рисков (в часах)
+ Настройка окружения (создание контейнера и подключение к БД). 2 часа.
+ Написание плана автоматизации тестирования. 12 часов.
+ Ручное тестирование сервиса. 72 часа.
+ Написание автотестов: 96 часов.
+ Подготовка отчётов о проведении ручного тестирования: 24 часа.
+ Подготовка отчётов о проведении автоматизированного тестирования: 24 часа.

## 5. План сдачи работ
+ 10-12 февраля — план автоматизации тестирования.
+ 13-15 февраля — ручное тестирование сервиса покупки тура. Оформление багов в Issues.
+ 17-21 февраля — автоматизация формы покупки с дебетовой карты.
+ 15-16 февраля — подготовка отчётных документов по итогам тестирования.
+ 21-23 февраля — подготовка отчётных документов по итогам автоматизации.
